# ImportData - JavaScript

> Triggers on files in blob storage and imports them into the database.

## Detail

The function triggers on files in blob storage containing the combined dataset
from all datasets as generated by [CombineDataSources](../CombineDataSources).

The function will update every user in the dataset (accounting for joiners),
ensuring their details are the latest version of the data (accounting for
movers i.e. changes in organisation, location, phone number(s), etc.). Users
already in the database and not in the import dataset will be marked
as inactive (accounting for leavers).

The data being imported is merged with the existing data, giving precedence to
the new data. Therefore, any additional data associated to the user e.g.
personal phone numbers, will be maintained during the import process.

### Creation of database and container

The database and container must for the function execution to be successful.
The function doesn't attempt to create the database or container as they are
fundamental to the operation of the message sending solution and will be
created during initial deployment.

The  container should have the `partitionKey` set to `/id` (the `id` is
`emailAddress`, providing a unique identifier and a good spread for
partitions).
